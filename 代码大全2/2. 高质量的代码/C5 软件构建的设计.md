# 软件构建的设计

## 5.1 设计挑战

”软件设计“是指构思、发明或设计将计算机软件规范编程可工作的软件的一种方案。”设计“是将需求与编码和调试联系起来的活动。好的顶层设计提供了可以安全地包含多个低层设计的结构。

### 设计是一个棘手的问题

### 设计没有章法，即使它产生的结果有条理

设计之所以”没有章法“，是因为你会采取许多不恰当的步骤，走入许多死胡同——总之，会犯很多错。事实上，犯错是设计的重点——犯错并予以纠正。与犯同样的错误直到完成编码后才意识到不得不纠正都要写完的代码相比，要便宜的多。设计没有章法，是因为好的解决方案与差的解决方案往往只有一些微妙的差异的区别。

设计是永无止境的。

### 设计关乎取舍和优先级

现实世界中，设计工作的一个关键部分是权衡互相竞争的设计特性，并从中取得平衡。

### 设计涉及限制

设计的要点在于，它的一部分是在创造可能性，另一部分是在限制可能性。

### 设计是不确定的

### 设计是启发式过程

### 设计是水到渠成的

## 5.2 关键设计概念

好的设计取决于对少数几个关键概念的理解。

### 软件的首要技术使命：管理复杂性

**偶然性和本质性的困难**

**管理复杂性的重要性**

软件项目调查在报告项目失败的原因时，它们很少将技术原因作为项目失败的主要原因。项目失败最常见的原因时需求不到位、计划不周或管理不善。但是，当项目确实主要是因为技术而失败时，原因往往时失控的复杂性。软件变得如此复杂，以至于没人真正知道它在做什么。一旦没人完全能够理解一个区域的代码变化对其他区域造成的影响，项目就无法进一步发展了。

在软件架构层面，问题的复杂性通过将系统划分为子系统来降低。所有软件设计技术目标都是将复杂问题分成简单的部分。子系统越是独立，就越能使其安全地专注于解决一个复杂的点。精心定义的对象将关注点分开，这样就可以以此只专注于做一件事。包在更高的聚合层次上提供了类似的好处。

保持子程序的简短，有助于减轻心智负担。从问题领域的角度来写程序，而不是从低层次的实现细节的角度来写，并在最高的抽象层次上工作们可以减少大脑的负担。

### 如何应对复杂性

高成本、低效率的设计有三个来源。

* 用复杂方案解决简单问题。
* 用简单的、不正确的方案解决复杂问题。
* 用不合适的、复杂的方案解决复杂问题。
* 近邻减少任何人的大脑在任何时候都必须处理的本质上的复杂性的数量
* 防止偶然的复杂性无谓的扩散

### 理想的设计特征

高质量的设计有几个常规特征。

设计质量的一些特征也是好程序的特征：可靠性、性能等。其他则是设计的内部特征。下面列出内部设计特性。

**最小化的复杂性** 设计的首要目标是出于之前讲述的各种原因，将复杂性降至最低。

**易于维护** 易于维护意味着要为负责维护的程序员而设计。

**松散耦合** 松散耦合是指在设计时，将程序不同部分之间的关联控制在最小范围内。

**可扩展性** 可扩展性意味着可在不破坏底层结构的前提下对系统进行增强。

****可重用性**** 可重用性是指在设计系统时，可在其他系统中重用它的某些部分

**高扇入** 高扇入是指由许多类在使用一个特定的类。高扇入意味着一个系统被设计成可以很好地利用系统中较低层次的实用类。

**低到中等扇出** 意味着一个特定的类使用到了低到中等数量的其他类。

**移植性**

**精简性**

**层次性**

**标准技术**

### 设计的层次
