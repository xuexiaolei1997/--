# 协同构建

## 21.1 协同开发实践概述

”协同构建“包括结对编程、正式审查、非正式技术评审、文档阅读以及其他能够让开发人员为创建代码和其他工作产品共同承担责任的技术。

**协同构建是其他质量保证技术的补充**

协同构建的首要目标是提高软件质量。

协同构建能够培育公司文化并加强编程技能

集体所有制适用于所有形式的协同构建

集体所有制的好处：

* 很多双眼睛的检查以及众多程序员的写作，可以使代码的质量变得更好。
* 因为每一段代码都有多个人熟悉，所以某个人离开项目造成的影响会更小。
* 总体上缺陷修正周期变短了，因为几个程序员中的任何一个有空，就能随时被指派去修正缺陷。

在构建前后都应保持协作

## 21.2 结对编程

成功运用结对编程的关键

* 用编码规范支持结对编程
* 不要让结对编程变成旁观
* 不要强迫在简单的问题上使用结对编程
* 定期对结对人员和分配的工作任务进行轮换
* 鼓励双方跟上对方的步伐
* 确保双方都能看到显示器
* 不要强迫彼此看不顺眼的人结对
* 避免新手组合
* 指定一个组长

结对编程的好处

* 与单独开发相比，结对能够使人们在压力之下保持更好的状态。
* 它能够提升代码质量。
* 它能够缩短进度时间表
* 它还具有协同构建的其他所有常见好处。

## 21.3 正式审查

### 期望审查能够带来什么结果

### 审查活动中的人员角色

* 主持人
* 作者
* 审查员
* 记录员
* 管理者

### 审查的一般步骤

规划

概述

准备

审查会议

审查报告

反攻

跟进

第三个小时的会议

对审查进行微调

### 审查与自尊心

### 审查总结

检查清单：有效的审查

| 具体内容                                                                               |
| -------------------------------------------------------------------------------------- |
| 是否有清单可以是审查人的注意力集中于过去有问题的领域？                                 |
| 是否将审查侧重于找出缺陷，而不是去修正它们？                                           |
| 是否考虑过为审查人分配特定的视角或场景，以帮助他们在做准备工作时更专注？               |
| 审查人在审查会议前是否有充足的时间进行准备，并且每个人都做好了准备？                   |
| 每个参与者是否都扮演了明确的角色：主持人、审查人和记录员等？                           |
| 会议是否以高效的速度运行？                                                             |
| 会议是否限制在两小时以内？                                                             |
| 所有审查参与者是否都接收过有针对性的审查培训，以及主持人是否接受过专门的主持技能培训？ |
| 每次审查时是否收集有关错误类型的数据，以便为组织量身定制未来的检查清单？               |
| 是否收集了有关准备速度和审查速度的数据，以便优化未来的准备和审查工作？                 |
| 每次审查是否分配了行动项，由主持人亲自跟进或者安排一次重新审查进行跟进？               |
| 管理层是否理解自己不应该参与审查会议？                                                 |
| 是否由跟进计划以确保问题已经得到正确修复？                                             |

## 21.4 其他类型的协同开发实践

### 走查

### 公开演示

### 协同构建技术的比较

| 内容                                                               | 结对编程                         | 正式审查       | 非正式评审（走查） |
| ------------------------------------------------------------------ | -------------------------------- | -------------- | ------------------ |
| 对参与者角色做出定义                                               | 是                               | 是             | 否                 |
| 包含有关如何执行角色的正式训练                                     | 有可能，通过指导                 | 是             | 否                 |
| 谁来主导协作                                                       | 掌握键盘的人                     | 主持人         | 通常是作者         |
| 协作的焦点                                                         | 设计、编码、测试以及错误修正     | 仅仅是缺陷检测 | 多方面             |
| 评审注意力集中在最常见类型的错误                                   | 即使能够做到，也只能算是非正式的 | 是             | 否                 |
| 采取跟进措施以减少不正确的修正                                     | 是                               | 是             | 否                 |
| 由于每个程序员都得到详细的对错误的反馈，<br />未来出现的错误更少了 | 偶尔如此                         | 是             | 偶尔如此           |
| 对结果的分析提高了流程效率                                         | 否                               | 是             | 否                 |
| 对非构建活动有用                                                   | 有可能                           | 是             | 是                 |
| 典型的缺陷检出率                                                   | 40~60%                           | 45~70%         | 20~40%             |
