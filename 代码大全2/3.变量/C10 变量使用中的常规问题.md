# 变量使用中的常规问题

## 10.1 数据扫盲

## 10.2 简化变量声明

### 隐式声明

关闭隐式声明

声明所有变量

遵循命名规范

检查变量名

## 10.3 变量初始化指南

在声明时初始化每个变量

在靠近首次使用的地方初始化每个变量

在理想情况下，应在靠近首次使用变量的地方声明和定义每个变量

尽可能使用final和const

特别注意计数器和累加器

在构造函数中初始化该类的成员数据

检查是否需要重新初始化

对具名常量进行一次初始化：在可执行代码中初始化变量

使用编译器设置来自动初始化所有变量

利用编译器的警告信息

检查输入参数的合法性

使用内存访问检测工具来检查错误的指针

在程序开始初始化工作内存处

## 10.4 作用域

### 变量引用局部化

尽可能缩短变量的“存活”时间

度量变量的“存活”时间

缩小作用域的一般原则

在循环之前立即初始化循环中使用的变量，而不是在包含该循环的子程序的开头进行初始化

在使用变量之前不要为其赋值

把相关语句放到一起

把相关语句拆分成单独的子程序

开始时严格限制可见性，若非必要，不宜扩大变量的作用域

## 10.5 持久性

持久性是对一段数据的生命周期的另一种描述。持久性有几种形式，一些变量会持久存在。

* 在一个特定代码块或子程序的生命周期内，如循环中。
* 只要允许，它们就会持久下去。如对象，若不删除，则一直存在。
* 存在于整个生命周期，如static变量。
* 永久存在。可能存储在数据库中的数据。

## 10.6 绑定时间

## 10.7 数据类型和控制结构之间的关系

序列型数据转化为程序中的顺序语句

选择型数据转化为程序中的if和else语句

迭代型数据转化为程序中的for、repeat、while等循环结构

## 10.8 每个变量只有一个用途

每个变量只限用于单一用途

避免使用具有隐含含义的变量

确保使用了所有已声明的变量

> 检查清单：数据使用中的常规注意事项
>
> | 项                 | 具体内容                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
> | ------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
> | 初始化变量         | 每一个子程序都检查其输入参数的合法性吗？<br />每个子程序是否检查输入参数的有效性？<br />代码是否在首次使用变量的地方声明变量？<br />如果可能的话，代码是否在声明变量时对其进行初始化？<br />如果不能同时声明和初始化变量，代码是否在靠近首次使用的地方初始化变量？<br />是否正确初始化了计数器和累加器？如有必要，是否在每次使用时都重新初始化？<br />在重复执行的代码中，变量的重新初始化是否正确？<br />代码编译时，编译器是否发出警告？启动所有可用的警告了吗？<br />如果所用的语言允许隐式声明，是否为由此引发的问题做好了补偿措施？ |
> | 使用数据的其他事项 | 所有变量都有最小的作用域吗？<br />对变量的引用都尽可能集中在一起吗？对同一变量的两次相邻引用以及变量的整个声明周期，是否都这样做了？<br />控制结构是否与数据类型相对应？<br />是否使用了所有已声明的变量？<br />变量都是在适应时间绑定的吗？也就是说，是否有意在后期绑定所带来的灵活性与增加的复杂度之间做出了平衡？<br />每个变量是否都是有且只有一个用途？<br />每个变量的含义都很明确且没有隐含意义吗？                                                                                                                               |
